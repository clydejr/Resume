/*!
 * Start Bootstrap - Resume v5.0.8 (http://iheartclyde.com)
 * Copyright 2013-2025 Clyde Jr
 * Licensed under KFK (https://github.com/BlackrockDigital/clydejr-resume/blob/master/LICENSE)
 */

let hireMeBtn=document.getElementById("hireMeBtn"),backdrop=document.getElementById("contactBackdrop"),modal=document.getElementById("contactModal"),closeBtn=document.getElementById("closeBtn"),form=document.getElementById("contactForm"),submitBtn=document.getElementById("submitBtn"),isVisible=!1;function openModal(){backdrop.classList.add("active"),document.body.style.overflow="hidden",setTimeout(()=>{document.getElementById("name").focus()},300)}function closeModal(){backdrop.classList.remove("active"),document.body.style.overflow="",hireMeBtn.focus()}function validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function showError(e,t,n){e=document.getElementById(e),t=document.getElementById(t);e.classList.add("error"),t.textContent=n,t.classList.add("visible")}function clearError(e,t){e=document.getElementById(e),t=document.getElementById(t);e.classList.remove("error"),t.classList.remove("visible")}window.addEventListener("scroll",()=>{25<window.scrollY&&!isVisible?(hireMeBtn.classList.add("visible"),isVisible=!0):window.scrollY<=25&&isVisible&&(hireMeBtn.classList.remove("visible"),isVisible=!1)}),hireMeBtn.addEventListener("click",openModal),closeBtn.addEventListener("click",closeModal),backdrop.addEventListener("click",e=>{e.target===backdrop&&closeModal()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&backdrop.classList.contains("active")&&closeModal()}),["name","email","message"].forEach(e=>{document.getElementById(e).addEventListener("input",()=>{clearError(e,e+"Error")})}),form.addEventListener("submit",async e=>{e.preventDefault(),["name","email","message"].forEach(e=>{clearError(e,e+"Error")});let t=!0;var e=document.getElementById("name").value.trim(),n=document.getElementById("email").value.trim(),s=document.getElementById("message").value.trim();if(e||(showError("name","nameError","Please enter your name"),t=!1),n?validateEmail(n)||(showError("email","emailError","Please enter a valid email"),t=!1):(showError("email","emailError","Please enter your email"),t=!1),s||(showError("message","messageError","Please enter a message"),t=!1),t){let t=submitBtn.textContent;submitBtn.textContent="Sending...",submitBtn.disabled=!0;try{await new Promise(e=>setTimeout(e,1500)),submitBtn.textContent="Sent! âœ“",submitBtn.style.background="#00CC66",setTimeout(()=>{form.style.display="none",document.querySelector(".alternative-contact").style.display="none",document.getElementById("successMessage").classList.add("visible")},100);var a=window.innerWidth<768,i=window.matchMedia("(prefers-reduced-motion: reduce)").matches;console.log("Confetti check:",{confettiAvailable:"undefined"!=typeof confetti,isMobile:a,prefersReducedMotion:i}),i||"undefined"==typeof confetti?console.log("Confetti skipped:",i?"reduced motion":"library not loaded"):(confetti({particleCount:a?80:150,spread:440,origin:{y:.6},colors:["#8B3FFF","#FF69B4","#00D4FF"],ticks:800,gravity:.2,scalar:1.5}),console.log("Confetti triggered!")),setTimeout(()=>{closeModal(),form.reset(),form.style.display="",document.querySelector(".alternative-contact").style.display="",document.getElementById("successMessage").classList.remove("visible"),submitBtn.textContent=t,submitBtn.style.background="",submitBtn.disabled=!1},3500)}catch(e){console.error("Error:",e),submitBtn.textContent="Failed. Try Again?",submitBtn.style.background="#FF4444",setTimeout(()=>{submitBtn.textContent=t,submitBtn.style.background="",submitBtn.disabled=!1},2e3)}}});let chatSection=document.getElementById("chatSection"),chatTitle=document.getElementById("chatTitle"),chatSubtitle=document.getElementById("chatSubtitle"),welcomeMsg=document.getElementById("welcomeMsg"),chatInput=document.querySelector(".chat-input"),chatBtn=document.getElementById("chatMeBtn"),chatMessages=document.getElementById("chatMessages"),activeAssistant="aws",awsClient=null,geminiClient=null;function clearChat(){chatMessages.innerHTML=""}function setAssistant(e){activeAssistant=e,clearChat(),"aws"===e?(chatSection.classList.remove("gemini-theme"),chatSection.classList.add("aws-theme"),chatTitle.textContent="AWS Assistant",chatSubtitle.textContent="Powered by AWS Cloud Native",appendMessage("bot",welcomeMsg.textContent="ðŸ‘‹ Welcome! Ask me about my AWS-powered projects."),chatBtn.style.background="linear-gradient(90deg, #252f3e, #ff9900)",chatInput.placeholder="Ask me about AWS projects..."):(chatSection.classList.remove("aws-theme"),chatSection.classList.add("gemini-theme"),chatTitle.textContent="Gemini Assistant",chatSubtitle.textContent="Powered by Google Gemini AI",appendMessage("bot",welcomeMsg.textContent="ðŸŒŒ Hello! Ask me about my Gemini-powered projects."),chatBtn.style.background="linear-gradient(90deg, var(--google-blue), var(--google-red), var(--google-yellow), var(--google-green))",chatInput.placeholder="Ask me about Gemini projects...")}async function sendMessage(e){appendMessage("user",e);var t=document.createElement("div");t.classList.add("message","bot-message"),t.innerHTML='<div class="typing-indicator"></div>',chatMessages.appendChild(t),chatMessages.scrollTop=chatMessages.scrollHeight;let n="";n="aws"===activeAssistant?await callAwsAPI(e,awsClient=awsClient||await initAwsClient()):await callGeminiAPI(e,geminiClient=geminiClient||await initGeminiClient()),t.remove(),appendMessage("bot",n)}function appendMessage(e,t){var n=document.createElement("div");n.classList.add("message"),"user"===e?(n.classList.add("user-message"),n.classList.add("aws"===activeAssistant?"aws-user":"gemini-user")):(n.classList.add("bot-message"),n.classList.add("aws"===activeAssistant?"aws-bot":"gemini-bot")),n.textContent=t,chatMessages.appendChild(n),chatMessages.scrollTop=chatMessages.scrollHeight}async function initAwsClient(){return console.log("Initializing AWS client..."),{}}async function callAwsAPI(e,t){try{var n,s=await fetch("https://i2flgq8kxe.execute-api.us-east-1.amazonaws.com/prod/chat",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({question:e,timestamp:(new Date).toISOString()})});if(s.ok)return(n=await s.json()).answer||n.response||"I apologize, but I couldn't generate a response. Please try rephrasing your question.";throw new Error(`HTTP ${s.status}: `+s.statusText)}catch(e){return console.error("AWS API error:",e),"I'm having trouble connecting right now. Please try again in a moment, or feel free to contact me directly!"}}async function initGeminiClient(){return console.log("Initializing Gemini client..."),{}}async function callGeminiAPI(e,t){try{return(await t.chat({model:"gemini-1",input:e})).outputText||"No response from Gemini"}catch(e){return console.error(e),"Error contacting Gemini API"}}document.getElementById("awsBtn").addEventListener("click",()=>setAssistant("aws")),document.getElementById("geminiBtn").addEventListener("click",()=>setAssistant("gemini")),chatBtn.addEventListener("click",async()=>{var e=chatInput.value.trim();e&&(chatInput.value="",await sendMessage(e))}),chatBtn.addEventListener("click",()=>{var e=chatInput.value.trim();e&&(chatInput.value="",sendMessage(e))}),setAssistant(activeAssistant);